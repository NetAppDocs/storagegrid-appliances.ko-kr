---
permalink: sg5800/replace-battery-e4000.html 
sidebar: sidebar 
keywords:  
summary:  
---
= E4000(SG5800)의 배터리 교체
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
그리드 관리자가 스토리지 컨트롤러 배터리 오류에 대한 경고를 발생시키거나 SANtricity 시스템 관리자의 Recovery Guru가 "배터리 고장" 또는 "배터리 교체 필요" 상태를 표시하는 경우 E4000 컨트롤러에서 영향을 받는 배터리를 교체해야 합니다. 데이터를 보호하려면 배터리를 최대한 빨리 교체해야 합니다.

SANtricity 시스템 관리자에서 Recovery Guru의 세부 정보를 검토하여 배터리에 문제가 있는지 확인하고 다른 항목을 먼저 해결하지 않도록 합니다.

.시작하기 전에
고장난 배터리를 교체할 계획이라면 다음이 필요합니다.

* 교체용 배터리
* ESD 밴드이거나 다른 정전기 방지 예방 조치를 취했습니다.
* 컨트롤러 캐니스터에 연결된 각 케이블을 식별하는 레이블입니다.
* SANtricity System Manager 액세스:
+
** 그리드 관리자에서 * nodes * > *_appliance node_ * > * SANtricity System Manager * 를 선택합니다. 컨트롤러 정보는 에 있습니다 https://docs.netapp.com/us-en/storagegrid-118/monitor/viewing-santricity-system-manager-tab.html["SANtricity 시스템 관리자 탭"].
** 관리 스테이션의 브라우저에서 컨트롤러의 도메인 이름 또는 IP 주소를 가리킵니다.






== 1단계: 배터리 교체 준비

장애가 발생한 배터리를 안전하게 제거할 수 있도록 컨트롤러 쉘프의 전원을 끕니다.

.단계
. SANtricity System Manager를 사용하여 스토리지 어레이의 구성 데이터베이스를 백업합니다.
+
컨트롤러를 제거할 때 문제가 발생하면 저장된 파일을 사용하여 구성을 복원할 수 있습니다. 시스템에서 RAID 구성 데이터베이스의 현재 상태를 저장합니다. 이 데이터베이스는 볼륨 그룹 및 컨트롤러의 디스크 풀에 대한 모든 데이터를 포함합니다.

+
** System Manager에서:
+
... 지원 > 지원 센터 > 진단 * 을 선택합니다.
... 구성 데이터 수집 * 을 선택합니다.
... 수집 * 을 클릭합니다.
+
파일은 브라우저의 다운로드 폴더에 * configurationData - <arrayName> - <DateTime>.7z * 라는 이름으로 저장됩니다.



** 또는 다음 CLI 명령을 사용하여 구성 데이터베이스를 백업할 수도 있습니다.
+
`save storageArray dbmDatabase sourceLocation=onboard contentType=all file="filename";`



. SANtricity 시스템 관리자를 사용하여 스토리지 어레이에 대한 지원 데이터를 수집합니다.
+
컨트롤러를 제거할 때 문제가 발생하면 저장된 파일을 사용하여 문제를 해결할 수 있습니다. 시스템은 스토리지 어레이에 대한 인벤토리, 상태 및 성능 데이터를 단일 파일로 저장합니다.

+
.. 지원 > 지원 센터 > 진단 * 을 선택합니다.
.. 지원 데이터 수집 * 을 선택합니다.
.. 수집 * 을 클릭합니다.
+
파일은 브라우저의 다운로드 폴더에 * support-data.7z * 라는 이름으로 저장됩니다.



. SG5800 컨트롤러를 종료합니다.
+
.. 그리드 노드에 로그인합니다.
+
... 다음 명령을 입력합니다. `ssh admin@grid_node_IP`
... 에 나열된 암호를 입력합니다 `Passwords.txt` 파일.
... 루트로 전환하려면 다음 명령을 입력합니다. `su -`
... 에 나열된 암호를 입력합니다 `Passwords.txt` 파일.
+
루트로 로그인하면 프롬프트가 에서 변경됩니다 `$` 를 선택합니다 `#`.



.. SG5800 컨트롤러를 종료합니다.
+
*`shutdown -h now`*

.. 캐시 메모리의 데이터가 드라이브에 기록될 때까지 기다립니다.
+
캐시된 데이터를 드라이브에 기록해야 하는 경우 E4000 컨트롤러 후면에 있는 녹색 캐시 활성 LED가 켜집니다. 이 LED가 꺼질 때까지 기다려야 합니다.



. SANtricity 시스템 관리자의 홈 페이지에서 * 진행 중인 작업 보기 * 를 선택합니다.
. 다음 단계를 계속하기 전에 모든 작업이 완료되었는지 확인하십시오.
. 컨트롤러 쉘프의 두 전원 스위치를 끕니다.
. 컨트롤러 쉘프의 모든 LED가 꺼질 때까지 기다립니다.




== 2단계: E4000 컨트롤러 캐니스터를 제거합니다

배터리를 분리하려면 컨트롤러 쉘프에서 컨트롤러 캐니스터를 제거해야 합니다.

.시작하기 전에
다음 사항을 확인하십시오.

* ESD 밴드이거나 다른 정전기 방지 예방 조치를 취했습니다.
* 컨트롤러 캐니스터에 연결된 각 케이블을 식별하는 레이블입니다.


.단계
. 컨트롤러 캐니스터에서 모든 케이블을 분리합니다.
+

CAUTION: 성능 저하를 방지하려면 케이블을 비틀거나 접거나 끼거나 밟지 마십시오.

. 컨트롤러 캐니스터의 호스트 포트가 SFP+ 트랜시버를 사용하는 경우 포트를 설치된 상태로 둡니다.
. 컨트롤러 후면의 캐시 활성 LED가 꺼져 있는지 확인합니다.
. 캠 핸들의 래치를 눌러 분리될 때까지 캠 핸들을 완전히 열어 컨트롤러 캐니스터를 미드플레인에서 분리한 다음 두 손으로 컨트롤러 캐니스터를 섀시 밖으로 반쯤 당깁니다.




== 3단계: 새 배터리를 설치합니다

고장난 배터리를 분리하고 교체해야 합니다.

.단계
. 새 배터리의 포장을 풀고 정전기가 없는 평평한 표면에 놓습니다.
+

NOTE: IATA 안전 규정을 준수하기 위해 교체 배터리는 30% 이하의 충전 상태(SoC)로 배송됩니다. 전원을 다시 켜면 교체 배터리가 완전히 충전되고 최초 학습 사이클이 완료될 때까지 쓰기 캐싱이 재개되지 않습니다.

. 아직 접지되지 않은 경우 올바르게 접지하십시오.
. 섀시에서 컨트롤러 캐니스터를 제거합니다.
. 컨트롤러 캐니스터를 뒤집어 평평하고 안정적인 표면에 놓습니다.
. 컨트롤러 캐니스터의 측면에 있는 파란색 버튼을 눌러 커버를 열고 커버를 컨트롤러 캐니스터에서 위쪽으로 돌리십시오.
+
image::../media/drw_E4000_open_controller_module_cover_IEOPS-870.png[컨트롤러 모듈 덮개를 엽니다.]

. 컨트롤러 캐니스터에서 배터리를 찾습니다.
. 컨트롤러 캐니스터에서 고장난 배터리를 제거합니다.
+
.. 컨트롤러 캐니스터 측면에 있는 파란색 버튼을 누릅니다.
.. 전지를 위로 밀어 고정 브래킷에서 분리한 다음 전지를 컨트롤러 캐니스터에서 들어 올립니다.
.. 컨트롤러 캐니스터에서 배터리를 분리합니다.
+
image::../media/drw_E4000_replace_nvbattery_IEOPS-862.png[NVMEM 배터리를 제거합니다.]

+
|===


 a| 
image::../media/legend_icon_01.png[범례 아이콘 01]
| 배터리 분리 탭 


 a| 
image::../media/legend_icon_02.png[범례 아이콘 02]
| 배터리 전원 커넥터 
|===


. 교체용 배터리를 포장에서 꺼냅니다. 교체용 배터리를 설치합니다.
+
.. 배터리 플러그를 컨트롤러 캐니스터의 소켓에 다시 꽂습니다.
+
플러그가 마더보드의 배터리 소켓에 제대로 잠겼는지 확인합니다.

.. 판금 측면의 고정 브래킷에 배터리를 맞춥니다.
.. 전지 래치가 맞물려 측면 벽의 구멍에 끼워질 때까지 전지 팩을 아래로 밉니다.


. 컨트롤러 캐니스터 커버를 다시 장착하고 제자리에 잠급니다.




== 4단계: 컨트롤러 캐니스터 재설치

컨트롤러 캐니스터의 구성 요소를 교체한 후 섀시에 다시 설치합니다.

.단계
. 아직 접지되지 않은 경우 올바르게 접지하십시오.
. 컨트롤러 캐니스터의 커버를 아직 장착하지 않은 경우 다시 장착합니다.
. 컨트롤러 캐니스터를 뒤집고 끝을 섀시의 입구에 맞춥니다.
. 컨트롤러 캐니스터의 끝을 섀시의 입구에 맞춘 다음 컨트롤러 캐니스터를 시스템 안쪽으로 살짝 밉니다.
+

NOTE: 지시가 있을 때까지 컨트롤러 캐니스터를 섀시에 완전히 삽입하지 마십시오.

. 필요에 따라 시스템을 다시 연결합니다.
. 컨트롤러 캐니스터 재설치를 완료합니다.
+
.. 캠 핸들이 열린 상태에서 컨트롤러 캐니스터가 미드플레인과 만나서 완전히 장착될 때까지 컨트롤러 캐니스터를 단단히 밀어 넣은 다음 캠 핸들을 잠금 위치로 닫습니다.
+

NOTE: 커넥터 손상을 방지하기 위해 컨트롤러 캐니스터를 섀시에 밀어 넣을 때 과도한 힘을 가하지 마십시오.

+
컨트롤러가 섀시에 장착되면 바로 부팅이 시작됩니다.

.. 아직 설치하지 않은 경우 케이블 관리 장치를 다시 설치하십시오.
.. 케이블을 후크와 루프 스트랩으로 케이블 관리 장치에 연결합니다.






== 5단계: 배터리 교체를 완료합니다

컨트롤러 전원을 켭니다.

.단계
. 컨트롤러 쉘프 후면에서 전원 스위치 2개를 켭니다.
+
** 전원 켜기 프로세스 중에는 일반적으로 완료하는 데 90초 이하의 시간이 소요되는 전원 스위치를 끄지 마십시오.
** 각 선반의 팬은 처음 시작할 때 매우 시끄럽습니다. 시동 중 큰 소음이 정상입니다.


. 컨트롤러가 다시 온라인 상태가 되면 컨트롤러 쉘프의 주의 LED를 확인합니다.
+
상태가 최적이 아니거나 주의 LED 중 하나라도 켜져 있는 경우 모든 케이블이 올바르게 장착되어 있는지 확인하고 배터리 및 컨트롤러 캐니스터가 올바르게 설치되어 있는지 확인합니다. 필요한 경우 컨트롤러 캐니스터와 배터리를 분리했다가 다시 설치합니다.

+

NOTE: 문제를 해결할 수 없는 경우 기술 지원 부서에 문의하십시오.
필요한 경우 SANtricity 시스템 관리자를 사용하여 스토리지 어레이에 대한 지원 데이터를 수집합니다.

. SANtricity 시스템 관리자를 사용하여 스토리지 어레이에 대한 지원 데이터를 수집합니다.
+
.. 지원 > 지원 센터 > 진단 * 을 선택합니다.
.. 지원 데이터 수집 을 선택합니다.
.. 수집 을 클릭합니다.
+
파일은 브라우저의 다운로드 폴더에 * support-data.7z * 라는 이름으로 저장됩니다.



. 재부팅이 완료되고 노드가 그리드에 다시 결합되었는지 확인합니다. Grid Manager에서 * Nodes * 페이지에 어플라이언스 노드에 대한 정상 상태(노드 이름 왼쪽에 녹색 확인 표시)가 표시되는지 확인합니다. 이는 활성화된 경고가 없고 노드가 그리드에 연결되어 있음을 나타냅니다.
+

NOTE: 전원 스위치를 켠 후 노드가 그리드에 다시 연결되어 그리드 관리자에 정상 상태를 표시할 때까지 20분이 걸릴 수 있습니다."



.다음 단계
배터리 교체가 완료되었습니다. 일반 작업을 다시 시작할 수 있습니다.
