---
permalink: sg5800/replace-controller-e4000-simplex.html 
sidebar: sidebar 
keywords: storagegrid, sg5800, storage node, storage appliance, Replacing, replace, e4000, controller, remove, removing, removal, install, installing, installation 
summary: E4000 컨트롤러가 최적으로 작동하지 않거나 고장난 경우 교체해야 할 수 있습니다. 
---
= E4000 컨트롤러 교체(SG5800)
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
E4000 컨트롤러가 최적으로 작동하지 않거나 고장난 경우 교체해야 할 수 있습니다.

.시작하기 전에
다음 사항을 확인하십시오.

* 교체 중인 컨트롤러와 동일한 부품 번호를 가진 교체 컨트롤러.
+

NOTE: 절차가 동일하지 않으므로 E-Series 지침에 따라 StorageGRID 어플라이언스의 컨트롤러를 교체하지 마십시오.

* ESD 밴드이거나 정전기 방지 예방 조치를 취했습니다.
* 컨트롤러에 연결된 각 케이블을 식별하는 레이블입니다.
* 특정 액세스 권한.
* 을 사용하여 그리드 관리자에 로그인해야 https://docs.netapp.com/us-en/storagegrid/admin/web-browser-requirements.html["지원되는 웹 브라우저"^] 합니다.
* SANtricity System Manager 액세스:
+
** 그리드 관리자에서 * nodes * > *_appliance node_ * > * SANtricity System Manager * 를 선택합니다. 컨트롤러 정보는 에 https://docs.netapp.com/us-en/storagegrid/monitor/viewing-santricity-system-manager-tab.html["SANtricity 시스템 관리자 탭"^]있습니다.
** 관리 스테이션의 브라우저에서 컨트롤러의 도메인 이름 또는 IP 주소를 가리킵니다.




.이 작업에 대해
다음 두 가지 방법으로 오류가 발생한 컨트롤러 캐니스터가 있는지 확인할 수 있습니다.

* 그리드 관리자 경고는 스토리지 컨트롤러 장애를 나타내며 SANtricity System Manager의 그리드 관리자 또는 복구 전문가가 컨트롤러를 교체하도록 안내합니다.
* 컨트롤러의 주황색 주의 LED가 켜져 컨트롤러에 장애가 있음을 나타냅니다.


컨트롤러를 교체할 때 어플라이언스 스토리지 노드에 액세스할 수 없습니다. E4000 시리즈 컨트롤러가 충분히 작동하면 가능합니다 link:../commonhardware/placing-appliance-into-maintenance-mode.html["SG5800 어플라이언스를 유지보수 모드로 전환합니다"].



== 1단계: 컨트롤러 교체 준비

드라이브 보안 키를 저장하고 구성을 백업하고 지원 데이터를 수집하여 컨트롤러 캐니스터 교체를 준비합니다. 그런 다음 호스트 I/O 작업을 중지하고 컨트롤러 쉘프의 전원을 끕니다.

.단계
. 가능한 경우 현재 컨트롤러에 설치되어 있는 SANtricity OS 소프트웨어 버전을 기록해 두십시오. SANtricity 시스템 관리자를 열고 * 지원 > 업그레이드 센터 > 소프트웨어 및 펌웨어 인벤토리 보기 * 를 선택합니다.
. 현재 설치되어 있는 NVSRAM 버전을 기록해 둡니다.
. 드라이브 보안 기능이 활성화된 경우, 저장된 키가 있는지, 설치에 필요한 암호를 알고 있는지 확인하십시오.
+

CAUTION: * 데이터 액세스 손실 가능성 * - 스토리지 배열의 모든 드라이브가 보안이 활성화된 경우 CLI를 사용하여 보안 드라이브의 잠금을 해제할 때까지 새 컨트롤러가 스토리지 배열에 액세스할 수 없습니다. CLI에 대한 자세한 내용은 를 참조하십시오 https://docs.netapp.com/us-en/e-series-cli/index.html["E-series 설명서"].

+
키를 저장하려면(컨트롤러의 상태에 따라 가능하지 않을 수 있음):

+
.. SANtricity 시스템 관리자에서 * 설정 > 시스템 * 을 선택합니다.
.. 드라이브 보안 키 관리 * 에서 * 백업 키 * 를 선택합니다.
.. 암호 구문 정의/암호 구문 다시 입력 * 필드에 이 백업 복사본의 암호를 입력하고 확인합니다.
.. 백업 * 을 클릭합니다.
.. 키 정보를 안전한 위치에 기록한 다음 * 닫기 * 를 클릭합니다.


. SANtricity System Manager를 사용하여 스토리지 시스템의 구성 데이터베이스를 백업합니다.
+
컨트롤러를 제거할 때 문제가 발생하면 저장된 파일을 사용하여 구성을 복원할 수 있습니다. 시스템에서 RAID 구성 데이터베이스의 현재 상태를 저장합니다. 이 데이터베이스는 볼륨 그룹 및 컨트롤러의 디스크 풀에 대한 모든 데이터를 포함합니다.

+
** System Manager에서:
+
... * 지원 센터 > 진단 * 을 선택합니다.
... 구성 데이터 수집 * 을 선택합니다.
... 수집 * 을 클릭합니다.
+
파일은 브라우저의 다운로드 폴더에 * configurationData - <arrayName> - <DateTime>.7z * 라는 이름으로 저장됩니다.



** 또는 다음 CLI 명령을 사용하여 구성 데이터베이스를 백업할 수도 있습니다.
+
`save storageArray dbmDatabase sourceLocation=onboard contentType=all file="filename";`



. SANtricity 시스템 관리자를 사용하여 스토리지 어레이에 대한 지원 데이터를 수집합니다.
+
컨트롤러를 제거할 때 문제가 발생하면 저장된 파일을 사용하여 문제를 해결할 수 있습니다. 시스템은 스토리지 어레이에 대한 인벤토리, 상태 및 성능 데이터를 단일 파일로 저장합니다.

+
.. * 지원 센터 > 진단 * 을 선택합니다.
.. 지원 데이터 수집 * 을 선택합니다.
.. 수집 * 을 클릭합니다.
+
파일은 브라우저의 다운로드 폴더에 * support-data.7z * 라는 이름으로 저장됩니다.







== 2단계: 컨트롤러를 오프라인으로 전환합니다

컨트롤러를 오프라인 상태로 전환하고 모든 작업이 완료되었는지 확인합니다.

.단계
. StorageGRID 어플라이언스가 StorageGRID 시스템에서 실행 중인 경우 link:../commonhardware/placing-appliance-into-maintenance-mode.html["제품을 유지보수 모드로 설정하십시오"].
. E4000 컨트롤러가 제어된 종료를 허용하기에 충분히 작동하면 모든 작업이 완료되었는지 확인합니다.
+
.. 캐시 메모리의 데이터가 드라이브에 기록될 때까지 기다립니다.
+
캐시 데이터를 드라이브에 기록해야 하는 경우 컨트롤러 후면의 녹색 캐시 활성 LED가 켜집니다. 이 LED가 꺼질 때까지 기다려야 합니다.

.. SANtricity 시스템 관리자의 홈 페이지에서 * 진행 중인 작업 보기 * 를 선택합니다.
.. 다음 단계를 계속하기 전에 모든 작업이 완료되었는지 확인하십시오.


. 컨트롤러 쉘프의 두 전원 스위치를 끕니다.
. 컨트롤러 쉘프의 모든 LED가 꺼질 때까지 기다립니다.




== 3단계: E4000 컨트롤러 캐니스터를 제거합니다

E4000 컨트롤러 캐니스터를 제거합니다.

.단계
. ESD 밴드를 착용하거나 정전기 방지 조치를 취하십시오.
. 컨트롤러 캐니스터에 부착된 각 케이블에 레이블을 부착합니다.
. 컨트롤러 캐니스터에서 모든 케이블을 분리합니다.
+

CAUTION: 성능 저하를 방지하려면 케이블을 비틀거나 접거나 끼거나 밟지 마십시오.

. 캠 핸들의 래치를 눌러 분리될 때까지 캠 핸들을 완전히 열어 컨트롤러 캐니스터를 미드플레인에서 분리한 다음, 두 손으로 컨트롤러 캐니스터를 섀시에서 꺼냅니다.
. 착탈식 덮개가 위를 향하도록 하여 정전기가 없는 평평한 표면에 컨트롤러를 놓습니다.
. 컨트롤러 캐니스터의 측면에 있는 파란색 버튼을 눌러 커버를 열고 커버를 컨트롤러 캐니스터에서 위쪽으로 돌리십시오.




== 4단계: 교체용 컨트롤러로 옮길 부품을 결정합니다

교체 컨트롤러에는 부품이 미리 설치되어 있을 수 있습니다. 교체용 컨트롤러 캐니스터로 옮겨야 할 부품을 결정합니다.

. 교체용 컨트롤러를 정전기가 없는 평평한 표면에 놓고 이동식 덮개가 위를 향하도록 놓습니다.
. 컨트롤러 캐니스터의 측면에 있는 파란색 버튼을 눌러 커버를 열고 커버를 컨트롤러 캐니스터에서 위쪽으로 돌리십시오.
. 교체 컨트롤러에 배터리 및/또는 DIMM이 있는지 확인합니다. 이 경우 컨트롤러 덮개를 다시 설치하고 로 이동합니다 <<step8_replace_controller,8단계: 컨트롤러를 교체합니다>>. 그렇지 않은 경우:
+
** 교체용 컨트롤러에 배터리 또는 DIMM이 포함되어 있지 않으면 로 이동합니다 <<step5_remove_battery,5단계: 배터리를 분리합니다>>.
** 교체용 컨트롤러에 DIMM이 아닌 배터리가 포함되어 있는 경우 로 이동합니다 <<step6_remove_dimm,6단계: DIMM을 이동합니다>>.






== 5단계: 배터리를 분리합니다

손상된 컨트롤러에서 배터리를 분리하여 교체용 컨트롤러에 장착합니다.

.단계
. 컨트롤러 캐니스터에서 배터리를 분리합니다.
+
.. 컨트롤러 캐니스터 측면에 있는 파란색 버튼을 누릅니다.
.. 전지를 위로 밀어 고정 브래킷에서 분리한 다음 전지를 컨트롤러 캐니스터에서 들어 올립니다.
.. 배터리 플러그 표면에 있는 클립을 눌러 소켓에서 플러그를 분리한 다음 소켓에서 배터리 케이블을 분리합니다.
+
image::../media/drw_E4000_replace_nvbattery_IEOPS-862.png[NVMEM 배터리를 제거합니다.]

+
|===


 a| 
image::../media/legend_icon_01.png[설명선 참조 1]
| 배터리 분리 탭 


 a| 
image::../media/legend_icon_02.png[설명선 참조 2]
| 배터리 전원 커넥터 
|===


. 배터리를 교체용 컨트롤러 캐니스터로 이동합니다.
+
.. 판금 측면 벽의 고정 브래킷에 배터리를 맞추되, 연결하지 마십시오. 나머지 구성 요소를 교체용 컨트롤러 캐니스터로 옮기면 플러그를 꽂습니다.


. 교체 컨트롤러에 DIMM이 미리 설치되어 있는 경우 로 이동합니다 <<step7_install_battery,7단계: 배터리를 설치합니다>>. 그렇지 않으면 다음 단계를 계속 진행합니다.




== 6단계: DIMM을 이동합니다

손상된 컨트롤러 캐니스터에서 DIMM을 제거하고 교체용 컨트롤러 캐니스터에 설치합니다.

.단계
. 컨트롤러 캐니스터에서 DIMM을 찾습니다.
+

NOTE: DIMM을 교체용 컨트롤러 캐니스터의 동일한 위치와 올바른 방향으로 삽입할 수 있도록 소켓의 DIMM 위치를 기록해 둡니다.
손상된 컨트롤러 캐니스터에서 DIMM을 분리합니다.

+
.. DIMM 양쪽에 있는 두 개의 DIMM 이젝터 탭을 천천히 밀어서 슬롯에서 DIMM을 꺼냅니다.
+
DIMM이 약간 위로 회전합니다.

.. DIMM을 끝까지 돌린 다음 소켓에서 DIMM을 꺼냅니다.
+

NOTE: DIMM 회로 보드의 구성 요소에 압력이 가해질 수 있으므로 DIMM의 가장자리를 조심스럽게 잡으십시오.

+
image::../media/drw_E4000_replace_dimms_IEOPS-865.png[DIMM을 분리합니다.]

+
|===


 a| 
image::../media/legend_icon_01.png[설명선 참조 1]
| DIMM 이젝터 탭 


 a| 
image::../media/legend_icon_02.png[설명선 참조 2]
| DIMM입니다 
|===


. 배터리가 교체용 컨트롤러 캐니스터에 꽂혀 있지 않은지 확인합니다.
. 장애가 발생한 컨트롤러에 있던 것과 동일한 위치에 DIMM을 교체 컨트롤러에 설치합니다.
+
.. 이젝터 탭이 DIMM 끝 부분의 노치 위에 끼워질 때까지 DIMM의 상단 가장자리를 조심스럽게 단단히 누릅니다.
+
DIMM은 슬롯에 단단히 장착되지만 쉽게 장착할 수 있습니다. 그렇지 않은 경우 DIMM을 슬롯에 재정렬하고 다시 삽입합니다.

+

NOTE: DIMM이 균일하게 정렬되어 슬롯에 완전히 삽입되었는지 육안으로 검사합니다.



. 다른 DIMM에 대해서도 이 단계를 반복합니다.
. 교체용 컨트롤러에 배터리가 미리 설치되어 있는 경우 로 이동합니다 <<step8_replace_controller,8단계: 컨트롤러를 교체합니다>>. 그렇지 않으면 다음 단계를 계속 진행합니다.




== 7단계: 배터리를 설치합니다

교체용 컨트롤러 캐니스터에 배터리를 설치합니다.

.단계
. 배터리 플러그를 컨트롤러 캐니스터의 소켓에 다시 꽂습니다.
+
플러그가 마더보드의 배터리 소켓에 제대로 잠겼는지 확인합니다.

. 판금 측면의 고정 브래킷에 배터리를 맞춥니다.
. 전지 래치가 맞물려 측면 벽의 구멍에 끼워질 때까지 전지 팩을 아래로 밉니다.
. 컨트롤러 캐니스터 커버를 다시 장착하고 제자리에 잠급니다.




== 8단계: 컨트롤러를 교체합니다

교체 컨트롤러를 설치하고 노드가 그리드에 다시 연결되었는지 확인합니다.

.단계
. 교체 컨트롤러를 제품에 설치합니다.
+
.. 이동식 덮개가 아래를 향하도록 컨트롤러를 뒤집습니다.
.. 캠 손잡이를 열린 상태에서 컨트롤러를 제품 안으로 끝까지 밀어 넣습니다.
.. 캠 핸들을 왼쪽으로 이동하여 컨트롤러를 제자리에 고정합니다.
.. 케이블을 교체합니다.
.. 컨트롤러 쉘프 전원을 켭니다.
.. E4000 컨트롤러가 재부팅될 때까지 기다립니다.
.. 교체 컨트롤러에 IP 주소를 할당하는 방법을 결정합니다.
+

NOTE: 교체 컨트롤러에 IP 주소를 할당하는 단계는 관리 포트를 DHCP 서버를 사용하여 네트워크에 연결했는지 여부와 모든 드라이브의 보안 여부에 따라 다릅니다.

+
관리 포트 1이 DHCP 서버가 있는 네트워크에 연결되어 있는 경우 새 컨트롤러는 DHCP 서버에서 해당 IP 주소를 가져옵니다. 이 값은 원래 컨트롤러의 IP 주소와 다를 수 있습니다.



. 스토리지 배열에 보안 드라이브가 있는 경우 드라이브 보안 키를 가져옵니다. 그렇지 않은 경우 다음 단계로 이동합니다. 모든 보안 드라이브가 있는 스토리지 어레이 또는 보안 드라이브와 비보안 드라이브가 혼합된 스토리지 어레이에 대해 아래의 적절한 절차를 따르십시오.
+

NOTE: _비보안 드라이브_는 할당되지 않은 드라이브, 전역 핫 스페어 드라이브 또는 드라이브 보안 기능에 의해 보호되지 않는 볼륨 그룹 또는 풀의 일부인 드라이브입니다. 보안 드라이브에는 드라이브 보안을 사용하는 보안 볼륨 그룹 또는 디스크 풀의 일부인 드라이브가 할당됩니다.

+
** * 보안된 드라이브만 사용(안전하지 않은 드라이브 없음) *:
+
... 스토리지의 CLI(Command Line Interface)에 액세스합니다. CLI에 대한 자세한 내용은 를 참조하십시오 https://docs.netapp.com/us-en/e-series-cli/index.html["E-series 설명서"].
... 컨트롤러에 적절한 단면 NVSRAM을 로드합니다.
+
예를 들면 다음과 같습니다. `download storageArray NVSRAM file=\"N4000-881834-SG4.dlp\" forceDownload=TRUE;`

... 단방향 NVSRAM을 로드한 후 컨트롤러가 * 최적 * 인지 확인합니다.
... 외부 보안 키 관리를 사용하는 경우 https://docs.netapp.com/us-en/e-series/upgrade-controllers/upgrade-unlock-drives-task.html#external-key-management["컨트롤러에서 외부 키 관리를 설정합니다"].
... 내부 보안 키 관리를 사용하는 경우 다음 명령을 입력하여 보안 키를 가져옵니다.
+
[listing]
----
import storageArray securityKey file="C:/file.slk"
passPhrase="passPhrase";
----
+
여기서,

+
**** `C:/file.slk` 드라이브 보안 키의 디렉터리 위치와 이름을 나타냅니다
**** `passPhrase` 보안 키를 가져온 후 파일 잠금을 해제하는 데 필요한 암호구이며 컨트롤러가 재부팅되고 새 컨트롤러가 스토리지 배열에 대해 저장된 설정을 채택합니다.


... 다음 단계로 이동하여 새 컨트롤러가 최적의 상태인지 확인합니다.


** * 보안과 비보안 드라이브 혼합 *:
+
... 지원 번들을 수집하고 스토리지 어레이 프로필을 엽니다.
... 지원 번들에 있는 비보안 드라이브의 모든 위치를 찾아 기록합니다.
... 시스템 전원을 끕니다.
... 비보안 드라이브를 제거합니다.
... 컨트롤러를 교체합니다.
... 시스템 전원을 켜고 7세그먼트 디스플레이에 트레이 번호가 표시될 때까지 기다립니다.
... SANtricity 시스템 관리자에서 * 설정 > 시스템 * 을 선택합니다.
... 보안 키 관리 섹션에서 * 키 생성/변경 * 을 선택하여 새 보안 키를 생성합니다.
... 저장한 보안 키를 가져오려면 * 보안 드라이브 잠금 해제 * 를 선택합니다.
... 를 실행합니다 `set allDrives nativeState` CLI 명령:
... 컨트롤러가 자동으로 재부팅됩니다.
... 컨트롤러가 부팅되고 7개 세그먼트 디스플레이에 트레이 번호 또는 L5가 깜박일 때까지 기다립니다.
... 시스템 전원을 끕니다.
... 안전하지 않은 드라이브를 다시 설치합니다.
... SANtricity 시스템 관리자를 사용하여 컨트롤러를 재설정합니다.
... 시스템 전원을 켜고 7세그먼트 디스플레이에 트레이 번호가 표시될 때까지 기다립니다.
... 다음 단계로 이동하여 새 컨트롤러가 최적의 상태인지 확인합니다.




. 이 절차를 수행하는 동안 제품을 유지보수 모드로 전환한 경우 제품을 정상 작동 모드로 되돌리십시오. StorageGRID 어플라이언스 설치 프로그램에서 * 고급 * > * 컨트롤러 재부팅 * 을 선택한 다음 * StorageGRID * 으로 재부팅 * 을 선택합니다.
+
image::../media/reboot_controller_from_maintenance_mode.png[유지보수 모드에서 컨트롤러를 재부팅합니다]

. 재부팅 중에 노드의 상태를 모니터링하여 노드가 그리드에 재결합되었는지 확인합니다.
+
어플라이언스가 재부팅되고 그리드에 다시 추가됩니다. 이 프로세스는 최대 20분 정도 소요될 수 있습니다.

. 재부팅이 완료되고 노드가 그리드에 다시 결합되었는지 확인합니다. Grid Manager에서 Nodes 페이지에 어플라이언스 노드에 대한 정상 상태(노드 이름 왼쪽에 녹색 확인 표시 아이콘)가 표시되는지 확인합니다image:../media/icon_alert_green_checkmark.png["녹색 확인 표시"]. 이는 활성 경고가 없고 노드가 그리드에 연결되어 있음을 나타냅니다.
+
image::../media/nodes_menu.png[어플라이언스 노드가 그리드에 다시 합류했습니다]

. SANtricity 시스템 관리자에서 새 컨트롤러가 최적인지 확인합니다.
+
.. 하드웨어 * 를 선택합니다.
.. 컨트롤러 쉘프에 대해 * 쉘프 뒷면 표시 * 를 선택합니다.
.. 교체한 컨트롤러 캐니스터를 선택합니다.
.. 설정 보기 * 를 선택합니다.
.. 컨트롤러의 * 상태 * 가 최적인지 확인합니다.
.. 상태가 최적이 아닌 경우 컨트롤러를 강조 표시하고 * 온라인 상태로 전환 * 을 선택합니다.


. SANtricity 시스템 관리자를 사용하여 스토리지 어레이에 대한 지원 데이터를 수집합니다.
+
.. 지원 > 지원 센터 > 진단 * 을 선택합니다.
.. 지원 데이터 수집 * 을 선택합니다.
.. 수집 * 을 클릭합니다.
+
파일은 브라우저의 다운로드 폴더에 * support-data.7z * 라는 이름으로 저장됩니다.





.다음 단계
부품을 교체한 후 키트와 함께 제공된 RMA 지침에 따라 오류가 발생한 부품을 NetApp에 반환합니다. 를 참조하십시오 https://mysupport.netapp.com/site/info/rma["부품 반납 및 교체"^] 페이지를 참조하십시오.
